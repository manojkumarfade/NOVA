import{j as e}from"./ui.D-SKQn5i.js";import{r as p}from"./vendor.CzzjzYca.js";import{C,H}from"./Checkbox.hOJTo8dj.js";import{I as v,B as b}from"./Button.CP0jvIJM.js";import{I as z,S as M}from"./Select.ZVmLsKKG.js";import{S as P}from"./StorageService.Dv_ujdX7.js";import"./utils.BNe0Xlio.js";const $=({onSearch:s,recentSearches:d=[],onClearRecent:c,className:m=""})=>{const[a,n]=p.useState(""),[i,g]=p.useState(!1),[o,f]=p.useState(!1),x=p.useRef(null);p.useEffect(()=>{const t=l=>{var w;x!=null&&x.current&&!((w=x==null?void 0:x.current)!=null&&w.contains(l==null?void 0:l.target))&&g(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const u=t=>{t==null||t.preventDefault(),a!=null&&a.trim()&&(s(a==null?void 0:a.trim()),g(!1))},j=t=>{n(t),s(t),g(!1)},y=t=>{var l,w,S;n((l=t==null?void 0:t.target)==null?void 0:l.value),g(((S=(w=t==null?void 0:t.target)==null?void 0:w.value)==null?void 0:S.length)>0&&(d==null?void 0:d.length)>0)};return e.jsxs("div",{className:`relative ${m}`,ref:x,children:[e.jsx("form",{onSubmit:u,className:"relative",children:e.jsxs("div",{className:"relative flex items-center gap-2 bg-card border border-border rounded-lg elevation-md transition-base focus-within:ring-2 focus-within:ring-ring",children:[e.jsx(v,{name:"Search",size:20,className:"absolute left-4 text-muted-foreground pointer-events-none"}),e.jsx("input",{type:"text",value:a,onChange:y,onFocus:()=>g((a==null?void 0:a.length)>0&&(d==null?void 0:d.length)>0),placeholder:"Search your browsing history with natural language...",className:"flex-1 pl-12 pr-4 py-3 md:py-4 bg-transparent text-sm md:text-base text-foreground placeholder:text-muted-foreground focus:outline-none"}),e.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[e.jsx(b,{type:"button",variant:"ghost",size:"icon",iconName:"SlidersHorizontal",onClick:()=>f(!o),className:"h-8 w-8 md:h-10 md:w-10"}),e.jsx(b,{type:"submit",variant:"default",size:"sm",iconName:"ArrowRight",iconPosition:"right",disabled:!(a!=null&&a.trim()),className:"hidden sm:flex",children:"Search"}),e.jsx(b,{type:"submit",variant:"default",size:"icon",iconName:"ArrowRight",disabled:!(a!=null&&a.trim()),className:"sm:hidden h-8 w-8"})]})]})}),i&&(d==null?void 0:d.length)>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-card border border-border rounded-lg elevation-lg overflow-hidden z-50",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-border",children:[e.jsx("span",{className:"text-xs font-caption font-medium text-muted-foreground",children:"Recent Searches"}),e.jsx("button",{onClick:c,className:"text-xs text-primary hover:text-primary/80 transition-base",children:"Clear All"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:d==null?void 0:d.map((t,l)=>e.jsxs("button",{onClick:()=>j(t),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-muted transition-base text-left",children:[e.jsx(v,{name:"History",size:16,className:"text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground truncate",children:t})]},l))})]}),o&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-card border border-border rounded-lg elevation-lg p-4 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground",children:"Quick Filters"}),e.jsx("button",{onClick:()=>f(!1),className:"text-muted-foreground hover:text-foreground transition-base",children:e.jsx(v,{name:"X",size:18})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Today","This Week","This Month","All Time"].map(t=>e.jsx(b,{variant:"outline",size:"sm",className:"justify-center",children:t},t))})]})]})};function D({src:s,alt:d="Image Name",className:c="",...m}){return e.jsx("img",{src:s,alt:d,className:c,onError:a=>{a.target.src="/assets/images/no_image.png"},...m})}const V=({result:s,onVisit:d,onBookmark:c,onShare:m,onExplain:a,className:n=""})=>{const i=o=>{const f=new Date(o),u=new Date-f,j=Math.floor(u/36e5),y=Math.floor(u/864e5);return j<1?"Less than an hour ago":j<24?`${j} hour${j>1?"s":""} ago`:y<7?`${y} day${y>1?"s":""} ago`:f==null?void 0:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g=o=>o>=90?"text-accent bg-accent/10":o>=70?"text-primary bg-primary/10":o>=50?"text-warning bg-warning/10":"text-muted-foreground bg-muted";return e.jsx("div",{className:`bg-card border border-border rounded-lg elevation-sm hover:elevation-md transition-base overflow-hidden ${n}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 p-4 md:p-6",children:[(s==null?void 0:s.thumbnail)&&e.jsx("div",{className:"w-full md:w-32 h-32 md:h-24 flex-shrink-0 overflow-hidden rounded-md bg-muted",children:e.jsx(D,{src:s==null?void 0:s.thumbnail,alt:s==null?void 0:s.thumbnailAlt,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground line-clamp-2 mb-1",children:s==null?void 0:s.title}),e.jsx("a",{href:s==null?void 0:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs md:text-sm text-primary hover:text-primary/80 transition-base truncate block",children:s==null?void 0:s.url})]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-caption font-medium whitespace-nowrap ${g(s==null?void 0:s.relevanceScore)}`,children:[e.jsx(v,{name:"Zap",size:12}),e.jsxs("span",{children:[s==null?void 0:s.relevanceScore,"%"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-3",children:s==null?void 0:s.snippet}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 text-xs text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{name:"Clock",size:14}),e.jsx("span",{children:i(s==null?void 0:s.visitedAt)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{name:"Eye",size:14}),e.jsxs("span",{children:[s==null?void 0:s.visitCount," visit",(s==null?void 0:s.visitCount)>1?"s":""]})]}),(s==null?void 0:s.contentType)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{name:"FileText",size:14}),e.jsx("span",{className:"capitalize",children:s==null?void 0:s.contentType})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(b,{variant:"default",size:"sm",iconName:"ExternalLink",iconPosition:"right",onClick:()=>d(s==null?void 0:s.url),children:"Revisit"}),e.jsx(b,{variant:"outline",size:"sm",iconName:s!=null&&s.isBookmarked?"BookmarkCheck":"Bookmark",onClick:()=>c(s==null?void 0:s.id)}),e.jsx(b,{variant:"outline",size:"sm",iconName:"Share2",onClick:()=>m(s)}),e.jsx(b,{variant:"ghost",size:"sm",iconName:"MessageSquare",onClick:()=>a(s),children:"Explain"})]})]})]})})},R=({isOpen:s,onClose:d,onApply:c,className:m=""})=>{const[a,n]=p.useState({start:"",end:""}),[i,g]=p.useState({whitelist:"",blacklist:""}),[o,f]=p.useState({articles:!0,videos:!0,documents:!0,images:!1}),[x,u]=p.useState("relevance"),j=()=>{c({dateRange:a,domains:i,contentTypes:o,sortBy:x}),d()},y=()=>{n({start:"",end:""}),g({whitelist:"",blacklist:""}),f({articles:!0,videos:!0,documents:!0,images:!1}),u("relevance")};return s?e.jsxs("div",{className:`bg-card border border-border rounded-lg elevation-md p-4 md:p-6 ${m}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-heading font-semibold text-foreground",children:"Advanced Filters"}),e.jsx("button",{onClick:d,className:"text-muted-foreground hover:text-foreground transition-base",children:e.jsx(v,{name:"X",size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground mb-3",children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{type:"date",label:"Start Date",value:a==null?void 0:a.start,onChange:t=>{var l;return n({...a,start:(l=t==null?void 0:t.target)==null?void 0:l.value})}}),e.jsx(z,{type:"date",label:"End Date",value:a==null?void 0:a.end,onChange:t=>{var l;return n({...a,end:(l=t==null?void 0:t.target)==null?void 0:l.value})}})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground mb-3",children:"Domain Filters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{label:"Whitelist Domains",placeholder:"example.com, another.com",description:"Only show results from these domains",value:i==null?void 0:i.whitelist,onChange:t=>{var l;return g({...i,whitelist:(l=t==null?void 0:t.target)==null?void 0:l.value})}}),e.jsx(z,{label:"Blacklist Domains",placeholder:"exclude.com, spam.com",description:"Exclude results from these domains",value:i==null?void 0:i.blacklist,onChange:t=>{var l;return g({...i,blacklist:(l=t==null?void 0:t.target)==null?void 0:l.value})}})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground mb-3",children:"Content Types"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{label:"Articles & Blog Posts",checked:o==null?void 0:o.articles,onChange:t=>{var l;return f({...o,articles:(l=t==null?void 0:t.target)==null?void 0:l.checked})}}),e.jsx(C,{label:"Videos",checked:o==null?void 0:o.videos,onChange:t=>{var l;return f({...o,videos:(l=t==null?void 0:t.target)==null?void 0:l.checked})}}),e.jsx(C,{label:"Documents (PDF, DOCX)",checked:o==null?void 0:o.documents,onChange:t=>{var l;return f({...o,documents:(l=t==null?void 0:t.target)==null?void 0:l.checked})}}),e.jsx(C,{label:"Images",checked:o==null?void 0:o.images,onChange:t=>{var l;return f({...o,images:(l=t==null?void 0:t.target)==null?void 0:l.checked})}})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground mb-3",children:"Sort By"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"relevance",label:"Relevance",icon:"Zap"},{value:"recent",label:"Most Recent",icon:"Clock"},{value:"frequent",label:"Most Visited",icon:"TrendingUp"},{value:"alphabetical",label:"Alphabetical",icon:"ArrowDownAZ"}].map(t=>e.jsxs("button",{onClick:()=>u(t==null?void 0:t.value),className:`
                  flex items-center gap-2 px-3 py-2 rounded-md text-sm font-caption transition-base
                  ${x===(t==null?void 0:t.value)?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground hover:bg-muted/80"}
                `,children:[e.jsx(v,{name:t==null?void 0:t.icon,size:16}),e.jsx("span",{children:t==null?void 0:t.label})]},t==null?void 0:t.value))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border",children:[e.jsx(b,{variant:"outline",fullWidth:!0,iconName:"RotateCcw",onClick:y,children:"Reset Filters"}),e.jsx(b,{variant:"default",fullWidth:!0,iconName:"Check",onClick:j,children:"Apply Filters"})]})]})]}):null},W=({timelineData:s=[],onPeriodClick:d,className:c=""})=>{var a;const m=n=>n===0?"bg-muted":n<=5?"bg-primary/20":n<=10?"bg-primary/40":n<=20?"bg-primary/60":"bg-primary";return e.jsxs("div",{className:`bg-card border border-border rounded-lg elevation-sm p-4 md:p-6 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-heading font-semibold text-foreground mb-1",children:"Browsing Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your activity patterns over the past 90 days"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Less"}),e.jsx("div",{className:"flex gap-1",children:[0,5,10,20,30].map((n,i)=>e.jsx("div",{className:`w-3 h-3 rounded-sm ${m(n)}`},i))}),e.jsx("span",{children:"More"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-flex flex-col gap-1 min-w-full",children:["Mon","Wed","Fri"].map((n,i)=>{var g;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground w-8 text-right",children:n}),e.jsx("div",{className:"flex gap-1",children:(g=s==null?void 0:s.slice(i*30,(i+1)*30))==null?void 0:g.map((o,f)=>e.jsx("button",{onClick:()=>d(o),className:`
                      w-3 h-3 md:w-4 md:h-4 rounded-sm transition-base hover:ring-2 hover:ring-ring
                      ${m(o==null?void 0:o.count)}
                    `,title:`${o==null?void 0:o.date}: ${o==null?void 0:o.count} visits`},f))})]},n)})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-heading font-bold text-foreground",children:s==null?void 0:s.reduce((n,i)=>n+(i==null?void 0:i.count),0)}),e.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"Total Visits"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-heading font-bold text-foreground",children:Math.round((s==null?void 0:s.reduce((n,i)=>n+(i==null?void 0:i.count),0))/90)}),e.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"Daily Average"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-heading font-bold text-foreground",children:Math.max(...s==null?void 0:s.map(n=>n==null?void 0:n.count))}),e.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"Peak Day"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-heading font-bold text-foreground",children:(a=s==null?void 0:s.filter(n=>(n==null?void 0:n.count)>0))==null?void 0:a.length}),e.jsx("span",{className:"text-xs md:text-sm text-muted-foreground",children:"Active Days"})]})]})]})},O=({clusters:s=[],onClusterClick:d,className:c=""})=>{const m=n=>{const i={Technology:"Cpu",Business:"Briefcase",Entertainment:"Film",Education:"GraduationCap",Health:"Heart",News:"Newspaper",Shopping:"ShoppingCart",Social:"Users",Travel:"Plane",Finance:"DollarSign"};return(i==null?void 0:i[n])||"Folder"},a=n=>{const i=["bg-primary/10 text-primary border-primary/20","bg-secondary/10 text-secondary border-secondary/20","bg-accent/10 text-accent border-accent/20","bg-warning/10 text-warning border-warning/20","bg-error/10 text-error border-error/20"];return i==null?void 0:i[n%(i==null?void 0:i.length)]};return e.jsxs("div",{className:`bg-card border border-border rounded-lg elevation-sm p-4 md:p-6 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-heading font-semibold text-foreground mb-1",children:"Content Clusters"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your browsing organized by topic"})]}),e.jsx(b,{variant:"ghost",size:"sm",iconName:"RefreshCw",children:"Refresh"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s==null?void 0:s.map((n,i)=>{var g,o;return e.jsxs("button",{onClick:()=>d(n),className:`
              flex flex-col gap-3 p-4 rounded-lg border transition-base
              hover:elevation-md ${a(i)}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-current/10",children:e.jsx(v,{name:m(n==null?void 0:n.topic),size:20})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-caption font-semibold",children:n==null?void 0:n.topic}),e.jsxs("p",{className:"text-xs opacity-80",children:[n==null?void 0:n.pageCount," pages"]})]})]}),e.jsx(v,{name:"ChevronRight",size:18})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(o=(g=n==null?void 0:n.topKeywords)==null?void 0:g.slice(0,3))==null?void 0:o.map((f,x)=>e.jsx("span",{className:"px-2 py-1 text-xs font-caption rounded-md bg-current/10",children:f},x))}),e.jsxs("div",{className:"flex items-center justify-between text-xs opacity-80",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{name:"Clock",size:12}),e.jsx("span",{children:n==null?void 0:n.lastVisited})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{name:"TrendingUp",size:12}),e.jsx("span",{children:n==null?void 0:n.visitFrequency})]})]})]},n==null?void 0:n.id)})}),(s==null?void 0:s.length)===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(v,{name:"Layers",size:48,className:"text-muted-foreground mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No content clusters available yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Browse more pages to see topic groupings"})]})]})},K=({className:s=""})=>{const[d,c]=p.useState(!0),[m,a]=p.useState("90"),[n,i]=p.useState(!1),g=[{value:"30",label:"30 Days"},{value:"90",label:"90 Days"},{value:"180",label:"6 Months"},{value:"365",label:"1 Year"},{value:"forever",label:"Forever"}],o=()=>{window.confirm("Are you sure you want to clear all browsing history? This action cannot be undone.")&&console.log("Clearing history...")},f=()=>{console.log("Exporting data...")};return e.jsxs("div",{className:`bg-card border border-border rounded-lg elevation-sm p-4 md:p-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10",children:e.jsx(v,{name:"Shield",size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-heading font-semibold text-foreground",children:"Privacy Controls"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your data and privacy settings"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx(C,{label:"Enable Content Indexing",description:"Allow AI to index and analyze your browsing content for better search results",checked:d,onChange:x=>{var u;return c((u=x==null?void 0:x.target)==null?void 0:u.checked)}})}),e.jsx("div",{children:e.jsx(M,{label:"Data Retention Period",description:"How long to keep your browsing history",options:g,value:m,onChange:a})}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx(C,{label:"Auto-Delete Old History",description:"Automatically remove history older than the retention period",checked:n,onChange:x=>{var u;return i((u=x==null?void 0:x.target)==null?void 0:u.checked)}})}),e.jsxs("div",{className:"pt-6 border-t border-border space-y-3",children:[e.jsx("h3",{className:"text-sm font-caption font-semibold text-foreground mb-3",children:"Data Management"}),e.jsx(b,{variant:"outline",fullWidth:!0,iconName:"Download",iconPosition:"left",onClick:f,children:"Export Browsing Data"}),e.jsx(b,{variant:"destructive",fullWidth:!0,iconName:"Trash2",iconPosition:"left",onClick:o,children:"Clear All History"})]}),e.jsx("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-foreground",children:[e.jsx("p",{className:"font-caption font-medium mb-1",children:"Your Privacy Matters"}),e.jsx("p",{className:"text-muted-foreground",children:"All data is stored locally on your device. We never send your browsing history to external servers without your explicit consent."})]})]})})]})]})},F=({type:s="no-results",onAction:d,className:c=""})=>{const m={"no-results":{icon:"SearchX",title:"No Results Found",description:"Try adjusting your search query or filters to find what you're looking for.",actionLabel:"Clear Filters",actionIcon:"RotateCcw"},"no-history":{icon:"History",title:"No Browsing History Yet",description:"Start browsing to build your searchable history. Your activity will appear here.",actionLabel:"Start Browsing",actionIcon:"ExternalLink"},"indexing-disabled":{icon:"ShieldOff",title:"Content Indexing Disabled",description:"Enable content indexing in privacy settings to search your browsing history.",actionLabel:"Enable Indexing",actionIcon:"Settings"}},a=(m==null?void 0:m[s])||(m==null?void 0:m["no-results"]);return e.jsxs("div",{className:`flex flex-col items-center justify-center py-12 md:py-16 px-4 text-center ${c}`,children:[e.jsx("div",{className:"flex items-center justify-center w-20 h-20 md:w-24 md:h-24 rounded-full bg-muted mb-6",children:e.jsx(v,{name:a==null?void 0:a.icon,size:40,className:"text-muted-foreground"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-heading font-semibold text-foreground mb-2",children:a==null?void 0:a.title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground max-w-md mb-6",children:a==null?void 0:a.description}),d&&e.jsx(b,{variant:"default",iconName:a==null?void 0:a.actionIcon,iconPosition:"right",onClick:d,children:a==null?void 0:a.actionLabel})]})},q=()=>{const[s,d]=p.useState(""),[c,m]=p.useState([]),[a,n]=p.useState([]),[i,g]=p.useState(!1),[o,f]=p.useState(!1),[x,u]=p.useState("results");p.useEffect(()=>{(async()=>{try{const h=await P.get("conversations_index",[]);if(!h||!Array.isArray(h)){n([]),m([]);return}const k=h.map(N=>({id:N.id,title:N.title||"Untitled Conversation",snippet:N.preview||"No preview available",visitedAt:N.timestamp?new Date(N.timestamp):new Date,visitCount:N.messageCount||0,contentType:"chat",url:"#",relevanceScore:100}));n(k),m(k)}catch(h){console.error("Failed to load history:",h),n([]),m([])}})()},[]);const j=Array.from({length:90},(r,h)=>{var k,N,A;return{date:(A=(N=(k=new Date(Date.now()-(89-h)*864e5))==null?void 0:k.toISOString())==null?void 0:N.split("T"))==null?void 0:A[0],count:Math.floor(Math.random()*30)}}),y=[{id:1,topic:"Technology",pageCount:156,topKeywords:["React","JavaScript","Web Development"],lastVisited:"2 hours ago",visitFrequency:"Daily"},{id:2,topic:"Business",pageCount:89,topKeywords:["Startups","Marketing","Strategy"],lastVisited:"1 day ago",visitFrequency:"Weekly"},{id:3,topic:"Education",pageCount:124,topKeywords:["Tutorials","Courses","Learning"],lastVisited:"3 hours ago",visitFrequency:"Daily"},{id:4,topic:"Entertainment",pageCount:67,topKeywords:["Movies","Music","Gaming"],lastVisited:"5 days ago",visitFrequency:"Monthly"},{id:5,topic:"News",pageCount:203,topKeywords:["Tech News","Industry","Updates"],lastVisited:"1 hour ago",visitFrequency:"Daily"},{id:6,topic:"Shopping",pageCount:45,topKeywords:["Electronics","Books","Software"],lastVisited:"1 week ago",visitFrequency:"Weekly"}];p.useEffect(()=>{if(s){const r=a.filter(h=>h.title.toLowerCase().includes(s.toLowerCase())||h.snippet.toLowerCase().includes(s.toLowerCase()));m(r)}else m(a)},[s,a]);const t=r=>{d(r),f(!0),setTimeout(()=>{f(!1)},200)},l=()=>{setRecentSearches([])},w=r=>{m(a)},S=r=>{window.open(r,"_blank","noopener,noreferrer")},E=r=>{m(c==null?void 0:c.map(h=>(h==null?void 0:h.id)===r?{...h,isBookmarked:!(h!=null&&h.isBookmarked)}:h))},T=r=>{var h;navigator.share?navigator.share({title:r==null?void 0:r.title,url:r==null?void 0:r.url}):((h=navigator.clipboard)==null||h.writeText(r==null?void 0:r.url),alert("Link copied to clipboard!"))},B=r=>{console.log("Explaining page:",r==null?void 0:r.title)},I=r=>{console.log("Period clicked:",r)},L=r=>{console.log("Cluster clicked:",r),d(r==null?void 0:r.topic),u("results")};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsx(H,{}),e.jsx("main",{className:"pt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-6 md:py-8",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-heading font-bold text-foreground mb-2",children:"Search Your History"}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Find previously visited pages using natural language and semantic search"})]}),e.jsx($,{onSearch:t,recentSearches,onClearRecent:l,className:"mb-6 md:mb-8"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[e.jsx(b,{variant:x==="results"?"default":"outline",size:"sm",iconName:"List",onClick:()=>u("results"),children:"Results"}),e.jsx(b,{variant:x==="timeline"?"default":"outline",size:"sm",iconName:"Calendar",onClick:()=>u("timeline"),children:"Timeline"}),e.jsx(b,{variant:x==="clusters"?"default":"outline",size:"sm",iconName:"Layers",onClick:()=>u("clusters"),children:"Topics"}),e.jsx(b,{variant:x==="privacy"?"default":"outline",size:"sm",iconName:"Shield",onClick:()=>u("privacy"),children:"Privacy"}),e.jsx("div",{className:"ml-auto",children:e.jsx(b,{variant:"outline",size:"sm",iconName:"SlidersHorizontal",onClick:()=>g(!i),children:"Filters"})})]}),i&&e.jsx(R,{isOpen:i,onClose:()=>g(!1),onApply:w,className:"mb-6"}),x==="results"&&e.jsx("div",{children:o?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx("div",{className:"animate-spin mb-4",children:e.jsx(v,{name:"Loader2",size:48,className:"text-primary"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Searching your history..."})]}):(c==null?void 0:c.length)>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Found ",c==null?void 0:c.length," result",(c==null?void 0:c.length)!==1?"s":"",s&&` for "${s}"`]})}),c==null?void 0:c.map(r=>e.jsx(V,{result:r,onVisit:S,onBookmark:E,onShare:T,onExplain:B},r==null?void 0:r.id))]}):s?e.jsx(F,{type:"no-results",onAction:()=>{d(""),m([])}}):e.jsx(F,{type:"no-history",onAction:()=>window.open("/","_blank")})}),x==="timeline"&&e.jsx(W,{timelineData:j,onPeriodClick:I}),x==="clusters"&&e.jsx(O,{clusters:y,onClusterClick:L}),x==="privacy"&&e.jsx(K,{})]})})]})};export{q as default};
