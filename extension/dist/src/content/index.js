let t=null,a=[],s=!1;const f="__nova_dom_overlay__";function p(){return t||(t=document.createElement("div"),t.id=f,t.style.position="fixed",t.style.inset="0",t.style.pointerEvents="none",t.style.zIndex="2147483647",document.documentElement.appendChild(t),t)}function c(){a.forEach(n=>n.remove()),a=[]}function m(n){const e=n.getBoundingClientRect();return e.width>=10&&e.height>=10&&e.bottom>0&&e.right>0&&e.top<innerHeight&&e.left<innerWidth}function h(n){const e=n*47%360;return{border:`hsl(${e},90%,45%)`,bg:`hsla(${e},90%,50%,0.08)`}}function b(n,e){const{border:l,bg:y}=h(n),i=document.createElement("div");i.style.position="absolute",i.style.left=e.left+"px",i.style.top=e.top+"px",i.style.width=e.width+"px",i.style.height=e.height+"px",i.style.border=`2px solid ${l}`,i.style.background=y,i.style.borderRadius="4px",i.style.boxSizing="border-box";const o=document.createElement("div");o.textContent=n,o.style.position="absolute",o.style.top="-14px",o.style.left="-14px",o.style.width="22px",o.style.height="22px",o.style.borderRadius="50%",o.style.background=l,o.style.color="#fff",o.style.font="bold 11px monospace",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",i.appendChild(o),t.appendChild(i),a.push(i)}function u(){if(!s)return;c(),p(),document.querySelectorAll("[data-nova-id]").forEach(e=>{if(!m(e))return;const l=e.getAttribute("data-nova-id");b(l,e.getBoundingClientRect())})}let d=null;function r(){d&&cancelAnimationFrame(d),d=requestAnimationFrame(u)}function g(){s||(s=!0,u(),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",r))}function v(){s=!1,c(),t==null||t.remove(),t=null,window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}console.log("Nova Browser Content Script Loaded");chrome.runtime.onMessage.addListener((n,e,l)=>{n.type==="EXECUTE_DOM_ACTION"?(console.log("Executing DOM Action:",n.action),l({status:"completed"})):n.type==="ENABLE_DOM_OVERLAY"?(g(),l({status:"enabled"})):n.type==="DISABLE_DOM_OVERLAY"&&(v(),l({status:"disabled"}))});
