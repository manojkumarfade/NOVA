import{c as f}from"../../assets/index.D8UHdPRD.js";import{j as e}from"../../assets/ui.D-SKQn5i.js";import{a as o,r as m,H as _,b as x,c as u}from"../../assets/vendor.CzzjzYca.js";import{_ as d}from"../../assets/preload-helper.CRk0x-X1.js";import{S as r}from"../../assets/StorageService.Dv_ujdX7.js";const c=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground animate-in fade-in duration-300",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm font-medium text-muted-foreground animate-pulse",children:"Initializing Nova..."})]}),g={async init(){const n=await r.getGlobal("current_session_user",null);return n?(r.setPrefix(`user_${n.id}_`),console.log("AuthService: Restored session for",n.username)):(r.setPrefix("guest_"),console.log("AuthService: Guest session")),typeof chrome<"u"&&chrome.storage&&chrome.storage.onChanged&&chrome.storage.onChanged.addListener((t,i)=>{if(i==="local"&&t.current_session_user){const s=t.current_session_user.newValue;s?r.setPrefix(`user_${s.id}_`):r.setPrefix("guest_"),window.location.reload()}}),n},async getCurrentUser(){return await r.getGlobal("current_session_user",null)},async login(n,t){const s=(await r.getGlobal("registered_users",[])).find(a=>a.email===n&&a.password===t);return s?(await r.setGlobal("current_session_user",s),r.setPrefix(`user_${s.id}_`),{success:!0,user:s}):{success:!1,error:"Invalid email or password"}},async signup(n,t,i){const s=await r.getGlobal("registered_users",[]);if(s.find(l=>l.email===t))return{success:!1,error:"Email already registered"};const a={id:Date.now().toString(),username:n,email:t,password:i,createdAt:new Date().toISOString()};return s.push(a),await r.setGlobal("registered_users",s),await r.setGlobal("current_session_user",a),r.setPrefix(`user_${a.id}_`),{success:!0,user:a}},async logout(){return await r.removeGlobal("current_session_user"),r.setPrefix("guest_"),!0},async updateProfile(n){const t=await this.getCurrentUser();if(!t)return!1;const i={...t,...n};await r.setGlobal("current_session_user",i);const s=await r.getGlobal("registered_users",[]),a=s.findIndex(l=>l.id===t.id);return a!==-1&&(s[a]=i,await r.setGlobal("registered_users",s)),i}},h=o.lazy(()=>d(()=>import("../../assets/ChatPage.DwESbv5y.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),p=o.lazy(()=>d(()=>import("../../assets/index.CMfKtHrF.js"),__vite__mapDeps([10,1,2,3,4,11,5,7]),import.meta.url)),w=o.lazy(()=>d(()=>import("../../assets/index.CiYm9b7l.js"),__vite__mapDeps([12,1,2,13,3,4,11,5]),import.meta.url)),j=()=>{const[n,t]=m.useState(!1);return m.useEffect(()=>{(async()=>{await g.init();const s=await r.get("general_settings"),a=(s==null?void 0:s.theme)||"dark";a==="dark"||a==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),t(!0)})()},[]),n?e.jsx(_,{children:e.jsx("div",{className:"flex flex-col h-screen bg-background overflow-hidden text-foreground",children:e.jsx("div",{className:"flex-1 h-full overflow-hidden relative",children:e.jsxs(x,{children:[e.jsx(u,{path:"/",element:e.jsx(o.Suspense,{fallback:e.jsx(c,{}),children:e.jsx(h,{})})}),e.jsx(u,{path:"/analytics",element:e.jsx(o.Suspense,{fallback:e.jsx(c,{}),children:e.jsx(p,{})})}),e.jsx(u,{path:"/history",element:e.jsx(o.Suspense,{fallback:e.jsx(c,{}),children:e.jsx(w,{})})})]})})})}):e.jsx(c,{})};f.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(j,{})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../../assets/ChatPage.DwESbv5y.js","../../assets/ui.D-SKQn5i.js","../../assets/vendor.CzzjzYca.js","../../assets/Button.CP0jvIJM.js","../../assets/utils.BNe0Xlio.js","../../assets/StorageService.Dv_ujdX7.js","../../assets/index.BI_XnwRa.js","../../assets/GlassLayout.2i7s6xei.js","../../assets/ContentReader.nO1touE1.js","../../assets/preload-helper.CRk0x-X1.js","../../assets/index.CMfKtHrF.js","../../assets/Select.ZVmLsKKG.js","../../assets/index.CiYm9b7l.js","../../assets/Checkbox.hOJTo8dj.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}