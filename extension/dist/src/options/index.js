import{c as H}from"../../assets/index.D8UHdPRD.js";import{j as e}from"../../assets/ui.D-SKQn5i.js";import{r as n,a as K}from"../../assets/vendor.CzzjzYca.js";import{C as E,H as U}from"../../assets/Checkbox.hOJTo8dj.js";import{B as P,I as u}from"../../assets/Button.CP0jvIJM.js";import{S as F,I as O}from"../../assets/Select.ZVmLsKKG.js";import{s as R,S as D}from"../../assets/StorageService.Dv_ujdX7.js";import{M as V,r as _}from"../../assets/index.BI_XnwRa.js";import"../../assets/utils.BNe0Xlio.js";const q={loginWithGoogle:async()=>{try{const g=chrome.identity.getRedirectURL();console.log("AuthHelper: Expected Redirect URL:",g);const{data:j,error:v}=await R.auth.signInWithOAuth({provider:"google",options:{redirectTo:g,skipBrowserRedirect:!0}});if(v)throw v;const k=j==null?void 0:j.url;if(!k)throw new Error("No auth URL returned from Supabase");console.log("AuthHelper: Launching Web Auth Flow with:",k),await new Promise((i,w)=>{chrome.identity.launchWebAuthFlow({url:k,interactive:!0},async l=>{if(chrome.runtime.lastError)return w(new Error(chrome.runtime.lastError.message));if(!l)return w(new Error("Authentication failed: No redirect URL received"));console.log("AuthHelper: Redirected to:",l);try{const y=new URL(l),d=y.hash.startsWith("#")?y.hash.slice(1):y.hash,x=new URLSearchParams(d),t=x.get("access_token"),h=x.get("refresh_token");if(t){const{error:N}=await R.auth.setSession({access_token:t,refresh_token:h});if(N)throw N;i()}else{const N=x.get("error_description")||"No tokens found in redirect";w(new Error(N))}}catch(y){w(y)}})})}catch(g){throw console.error("AuthHelper Error:",g),g}}},Y=()=>{const[g,j]=n.useState(null),[v,k]=n.useState("loading"),[i,w]=n.useState(""),[l,y]=n.useState(""),[d,x]=n.useState(""),[t,h]=n.useState(!1);n.useEffect(()=>{N();const{data:{subscription:c}}=R.auth.onAuthStateChange((A,p)=>{j((p==null?void 0:p.user)??null),k(p!=null&&p.user?"profile":"login")});return()=>c.unsubscribe()},[]);const N=async()=>{const{data:{session:c}}=await R.auth.getSession();j((c==null?void 0:c.user)??null),k(c!=null&&c.user?"profile":"login")},M=async c=>{c.preventDefault(),h(!0),x("");try{const{error:A}=await R.auth.signInWithPassword({email:i,password:l});if(A)throw A}catch(A){x(A.message)}finally{h(!1)}},r=async c=>{c.preventDefault(),h(!0),x("");try{const{error:A}=await R.auth.signUp({email:i,password:l});if(A)throw A;x("Check your email for confirmation link (if enabled), or sign in.")}catch(A){x(A.message)}finally{h(!1)}},a=async()=>{h(!0),x("");try{await q.loginWithGoogle()}catch(c){x(c.message)}finally{h(!1)}},m=async()=>{await R.auth.signOut()};return v==="loading"?e.jsx("div",{className:"p-4 text-muted-foreground",children:"Loading account..."}):v==="profile"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center text-2xl font-bold text-primary",children:(g.email||"U").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-foreground",children:g.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Cloud Sync Active"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Your settings and preferences are synchronized with your account."}),e.jsx(P,{onClick:m,variant:"destructive",className:"w-full sm:w-auto",children:"Sign Out"})]})]}):e.jsxs("div",{className:"space-y-6 max-w-sm",children:[e.jsx("div",{className:"flex gap-4 border-b border-border pb-2 mb-4",children:e.jsx("button",{className:"pb-2 text-sm font-medium text-primary border-b-2 border-primary -mb-2.5",children:"Sign In / Sign Up"})}),d&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded text-red-500 text-sm",children:d}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:i,onChange:c=>w(c.target.value),className:"w-full px-3 py-2 bg-muted border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsx("input",{type:"password",required:!0,value:l,onChange:c=>y(c.target.value),className:"w-full px-3 py-2 bg-muted border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(P,{onClick:M,disabled:t,className:"flex-1",children:t?"Processing...":"Log In"}),e.jsx(P,{onClick:r,disabled:t,variant:"outline",className:"flex-1",children:"Sign Up"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-card text-gray-400",children:"Or"})})]}),e.jsxs("button",{onClick:a,disabled:t,className:"w-full flex justify-center py-2 px-4 border border-gray-700 rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})]})},G=()=>{const[g,j]=n.useState(!0),[v,k]=n.useState(!0),[i,w]=n.useState(!0),[l,y]=n.useState("90"),[d,x]=n.useState("dark"),[t,h]=n.useState("en"),[N,M]=n.useState(50),[r,a]=n.useState(!0),[m,c]=n.useState(!1),[A,p]=n.useState("");n.useEffect(()=>{(async()=>{const T=await D.get("general_settings");T?(j(T.pageIndexing??!0),k(T.historyTracking??!0),w(T.analyticsCollection??!0),y(T.dataRetention||"90"),x(T.theme||"dark"),h(T.language||"en"),s(T.theme||"dark"),M(T.intelligenceSpeed??50),a(T.autoRetry??!0),c(T.autoSiteSwitch??!1)):s("dark")})()},[]);const s=b=>{b==="dark"||b==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},f=[{value:"30",label:"30 Days"},{value:"60",label:"60 Days"},{value:"90",label:"90 Days"},{value:"180",label:"6 Months"},{value:"365",label:"1 Year"},{value:"forever",label:"Forever"}],S=[{value:"dark",label:"Dark Mode"},{value:"light",label:"Light Mode"},{value:"auto",label:"Auto (System)"}],o=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"ja",label:"Japanese"}],C=async()=>{p("saving"),await D.set("general_settings",{pageIndexing:g,historyTracking:v,analyticsCollection:i,dataRetention:l,theme:d,language:t,intelligenceSpeed:N,autoRetry:r,autoSiteSwitch:m}),s(d),setTimeout(()=>{p("saved"),setTimeout(()=>p(""),3e3)},1e3)},I=()=>{j(!0),k(!0),w(!0),y("90"),x("dark"),h("en"),M(50),a(!0),c(!1),s("dark")},L=b=>{x(b),s(b)};return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:e.jsx(u,{name:"User",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"User Profile"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Manage your account and session"})]})]}),e.jsx(Y,{})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary/10",children:e.jsx(u,{name:"Shield",size:20,color:"var(--color-secondary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Privacy Settings"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Control your data and privacy preferences"})]})]}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(E,{label:"Enable Page Indexing",description:"Allow AgenticBrowser to index and analyze visited pages for better assistance. You can disable this at any time.",checked:g,onChange:b=>j(b.target.checked)}),e.jsx(E,{label:"Track Browsing History",description:"Store your browsing history locally for search and analysis features. History is never shared externally.",checked:v,onChange:b=>k(b.target.checked)}),e.jsx(E,{label:"Collect Usage Analytics",description:"Help improve AgenticBrowser by sharing anonymous usage statistics and performance data.",checked:i,onChange:b=>w(b.target.checked)}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx(F,{label:"Data Retention Period",description:"Choose how long to keep your browsing data and conversation history",options:f,value:l,onChange:y})})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/20",children:e.jsx(u,{name:"Cpu",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Intelligence Controls"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Configure autonomous behavior"})]})]}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-1 block",children:["Speed vs Accuracy (Current: ",N,"%)"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:N,onChange:b=>M(Number(b.target.value)),className:"w-full accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Thorough (Accuracy)"}),e.jsx("span",{children:"Balanced"}),e.jsx("span",{children:"Rapid (Speed)"})]})]}),e.jsx(E,{label:"Auto-Retry Fails",description:"Automatically attempt to recover from errors without asking.",checked:r,onChange:b=>a(b.target.checked)}),e.jsx(E,{label:"Auto Site-Switch",description:"Switch to alternative websites if the current one is blocked or broken.",checked:m,onChange:b=>c(b.target.checked)})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-accent/10",children:e.jsx(u,{name:"Palette",size:20,color:"var(--color-accent)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Appearance"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Customize the look and feel of your interface"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{label:"Theme",description:"Choose your preferred color scheme",options:S,value:d,onChange:L}),e.jsx(F,{label:"Language",description:"Select your preferred language for the interface",options:o,value:t,onChange:h})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-4",children:[e.jsx(P,{variant:"default",iconName:"Save",iconPosition:"left",onClick:C,loading:A==="saving",className:"flex-1 sm:flex-initial",children:A==="saved"?"Saved Successfully":"Save Changes"}),e.jsx(P,{variant:"outline",iconName:"RotateCcw",iconPosition:"left",onClick:I,disabled:A==="saving",className:"flex-1 sm:flex-initial",children:"Reset to Defaults"}),A==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-accent text-sm font-caption",children:[e.jsx(u,{name:"CheckCircle2",size:16}),e.jsx("span",{children:"Changes saved successfully"})]})]})]})},W=()=>{const[g,j]=n.useState("gpt-4-turbo"),[v,k]=n.useState("gpt-4-turbo"),[i,w]=n.useState("gpt-4-turbo"),[l,y]=n.useState(.7),[d,x]=n.useState(""),[t,h]=n.useState([]);n.useEffect(()=>{(async()=>{const m=await D.get("model_settings");m&&(j(m.plannerModel||"gpt-4-turbo"),k(m.navigatorModel||"gpt-4-turbo"),w(m.validatorModel||"gpt-4-turbo"),y(m.navigatorTemperature??.7));const c=await D.get("llm_providers");if(c&&c.length>0){const A=c.filter(p=>p.isEnabled).flatMap(p=>p.models.map(s=>({value:s,label:s.split("/").pop(),description:`Provided by ${p.name}`})));h(A.length>0?A:N())}else h(N())})()},[]);const N=()=>[{value:"gpt-4-turbo",label:"GPT-4 Turbo",description:"Most capable, best for complex tasks"},{value:"gpt-4",label:"GPT-4",description:"Balanced performance and cost"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",description:"Fast and cost-effective"}],M=async()=>{x("saving"),await D.set("model_settings",{plannerModel:g,navigatorModel:v,validatorModel:i,navigatorTemperature:l}),setTimeout(()=>{x("saved"),setTimeout(()=>x(""),3e3)},1e3)},r=()=>{j("gpt-4-turbo"),k("gpt-4-turbo"),w("gpt-4-turbo"),y(.7)};return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:e.jsx(u,{name:"Brain",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Planner Agent"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Analyzes tasks and creates execution plans"})]})]}),e.jsx(F,{label:"Model Selection",description:"Choose the LLM model for planning complex multi-step tasks",options:t,value:g,onChange:j,searchable:!0})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary/10",children:e.jsx(u,{name:"Navigation",size:20,color:"var(--color-secondary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Navigator Agent"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Executes web navigation and DOM interactions"})]})]}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx(F,{label:"Model Selection",description:"Choose the LLM model for executing navigation actions",options:t,value:v,onChange:k,searchable:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-caption font-medium text-foreground mb-2",children:"Temperature Control"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Adjust creativity vs. precision: Lower values (0.0-0.3) for precise actions, higher values (0.7-1.0) for creative problem-solving"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l,onChange:a=>y(parseFloat(a.target.value)),className:"flex-1 h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsx("div",{className:"flex items-center justify-center min-w-[60px] h-10 px-3 bg-muted border border-border rounded-md",children:e.jsx("span",{className:"text-sm font-caption font-medium text-foreground",children:l.toFixed(1)})})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Precise"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Creative"})]})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-accent/10",children:e.jsx(u,{name:"CheckCircle2",size:20,color:"var(--color-accent)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Validator Agent"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Verifies task completion and validates results"})]})]}),e.jsx(F,{label:"Model Selection",description:"Choose the LLM model for validating task execution and results",options:t,value:i,onChange:w,searchable:!0})]}),e.jsx("div",{className:"bg-muted border border-border rounded-lg p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-foreground font-caption font-medium",children:"Model Selection Tips"}),e.jsxs("ul",{className:"text-xs md:text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Use GPT-4 Turbo or Claude 3 Opus for complex multi-step workflows"}),e.jsx("li",{children:"GPT-3.5 Turbo works well for simple navigation tasks"}),e.jsx("li",{children:"Different models can be assigned to each agent for optimal performance"}),e.jsx("li",{children:"Temperature affects Navigator Agent's decision-making creativity"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-4",children:[e.jsx(P,{variant:"default",iconName:"Save",iconPosition:"left",onClick:M,loading:d==="saving",className:"flex-1 sm:flex-initial",children:d==="saved"?"Saved Successfully":"Save Changes"}),e.jsx(P,{variant:"outline",iconName:"RotateCcw",iconPosition:"left",onClick:r,disabled:d==="saving",className:"flex-1 sm:flex-initial",children:"Reset to Defaults"}),d==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-accent text-sm font-caption",children:[e.jsx(u,{name:"CheckCircle2",size:16}),e.jsx("span",{children:"Changes saved successfully"})]})]})]})},$=()=>{const[g,j]=n.useState([]),[v,k]=n.useState({}),[i,w]=n.useState(""),[l,y]=n.useState(!1),[d,x]=n.useState(""),[t,h]=n.useState(""),[N,M]=n.useState(""),[r,a]=n.useState(""),m=[{id:"openai",name:"OpenAI",icon:"Sparkles",apiKey:"",isConnected:!1,isEnabled:!0,endpoint:"https://api.openai.com/v1/chat/completions",models:["GPT-4 Turbo","GPT-4","GPT-3.5 Turbo"]},{id:"typegpt",name:"TypeGPT",icon:"Cpu",apiKey:"",isConnected:!1,isEnabled:!0,endpoint:"https://api.typegpt.net/v1/chat/completions",models:["zai-org/GLM-4.6","Qwen/Qwen3-235B-A22B-Thinking-2507","Qwen/Qwen3-235B-A22B-Instruct-2507","moonshotai/kimi-k2-instruct-0905","moonshotai/kimi-k2-thinking","moonshotai/kimi-k2-instruct","qwen/qwen3-coder-480b-a35b-instruct","deepseek-ai/deepseek-r1","deepseek-ai/deepseek-r1-0528","openai/gpt-oss-120b","mistralai/mistral-large-3-675b-instruct-2512","deepseek-ai/deepseek-v3.1-terminus","mistralai/mistral-small-24b-instruct","mistralai/magistral-small-2506","mistralai/ministral-14b-instruct-2512","qwen/qwen3-next-80b-a3b-thinking","qwen/qwen3-next-80b-a3b-instruct"]},{id:"anthropic",name:"Anthropic",icon:"Zap",apiKey:"",isConnected:!1,isEnabled:!1,models:["Claude 3 Opus","Claude 3 Sonnet","Claude 3 Haiku"]},{id:"google",name:"Google AI",icon:"Gem",apiKey:"",isConnected:!1,isEnabled:!1,models:["Gemini Pro","Gemini Ultra"]},{id:"deepseek",name:"DeepSeek",icon:"Brain",apiKey:"",isConnected:!1,isEnabled:!1,models:["DeepSeek Chat","DeepSeek Coder"]}];n.useEffect(()=>{(async()=>{const C=await D.get("llm_providers");if(C&&C.length>0){const I=m.map(b=>{const T=C.find(B=>B.id===b.id);return T?{...b,...T,models:b.models}:b}),L=C.filter(b=>!m.find(T=>T.id===b.id));j([...I,...L])}else j(m)})()},[]);const c=o=>{k(C=>({...C,[o]:!(C!=null&&C[o])}))},A=(o,C)=>{j(I=>I.map(L=>L.id===o?{...L,apiKey:C}:L))},p=o=>{j(C=>C.map(I=>I.id===o?{...I,isEnabled:!I.isEnabled}:I))},s=async o=>{const C=g.find(b=>b.id===o);if(!(C!=null&&C.apiKey))return;let I=!1;const L=document.getElementById(`test-btn-${o}`);L&&(L.innerText="Testing...");try{if(o==="typegpt")try{(await fetch("https://api.typegpt.net/v1/models",{method:"GET",headers:{Authorization:`Bearer ${C.apiKey}`}})).ok?I=!0:(console.warn("TypeGPT models check failed, trying chat completion..."),(await fetch("https://api.typegpt.net/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C.apiKey}`},body:JSON.stringify({model:C.models[0]||"deepseek-ai/deepseek-r1",messages:[{role:"user",content:"Hi"}],max_tokens:5})})).ok&&(I=!0))}catch(b){console.error("TypeGPT Test Error:",b)}else await new Promise(b=>setTimeout(b,1e3)),C.apiKey.length>10&&(I=!0)}catch(b){console.error("Connection test failed",b)}L&&(L.innerText=I?"Success":"Failed"),setTimeout(()=>{L&&(L.innerText="Test")},2e3),I&&j(b=>b.map(T=>T.id===o?{...T,isConnected:!0}:T))},f=async()=>{w("saving"),await D.set("llm_providers",g),setTimeout(()=>{w("saved"),setTimeout(()=>w(""),3e3)},1e3)},S=()=>{if(!d.trim())return;const C={id:d.toLowerCase().replace(/\s+/g,"-"),name:d,icon:"Globe",apiKey:N,endpoint:t||"https://api.openai.com/v1/chat/completions",isConnected:!1,isEnabled:!0,models:[r||"default-model"]};j([...g,C]),x(""),h(""),M(""),a(""),y(!1)};return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsx("div",{className:"bg-muted border border-border rounded-lg p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-foreground font-caption font-medium",children:"LLM Provider Configuration"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Configure API keys for different LLM providers. Your keys are stored locally and never shared."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:g.map(o=>e.jsx("div",{className:`
              bg-card border rounded-lg p-4 md:p-6 elevation-sm transition-base
              ${o.isEnabled?"border-primary/30":"border-border"}
            `,children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`
                  flex items-center justify-center w-12 h-12 rounded-lg flex-shrink-0
                  ${o.isEnabled?"bg-primary/10":"bg-muted"}
                `,children:e.jsx(u,{name:o.icon,size:24,color:o.isEnabled?"var(--color-primary)":"var(--color-muted-foreground)"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:o.name}),o.isConnected&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent/10 rounded-full",children:[e.jsx(u,{name:"CheckCircle2",size:12,className:"text-accent"}),e.jsx("span",{className:"text-xs font-caption text-accent",children:"Connected"})]})]}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground mb-3",children:["Available models: ",o.models.length>5?o.models.slice(0,5).join(", ")+"...":o.models.join(", ")]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(E,{label:"Enable this provider",description:"Make this provider's models available for agent assignment",checked:o.isEnabled,onChange:()=>p(o.id)}),o.isEnabled&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-caption font-medium text-foreground",children:"API Key"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:v[o.id]?"text":"password",value:o.apiKey,onChange:C=>A(o.id,C.target.value),placeholder:"Enter your API key",className:"w-full px-4 py-2 pr-10 bg-muted border border-border rounded-md text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-base"}),e.jsx("button",{onClick:()=>c(o.id),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-background rounded transition-base","aria-label":v[o.id]?"Hide API key":"Show API key",children:e.jsx(u,{name:v[o.id]?"EyeOff":"Eye",size:16,className:"text-muted-foreground"})})]}),e.jsx(P,{id:`test-btn-${o.id}`,variant:"outline",size:"default",iconName:"Plug",onClick:()=>s(o.id),disabled:!o.apiKey,className:"whitespace-nowrap",children:"Test"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-caption font-medium text-foreground",children:"Endpoint URL"}),e.jsx("input",{type:"text",value:o.endpoint||"",onChange:C=>handleEndpointChange(o.id,C.target.value),placeholder:"https://api.openai.com/v1/chat/completions",className:"w-full px-4 py-2 bg-muted border border-border rounded-md text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-base"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Standard OpenAI-compatible chat completion endpoint."})]})]})]})]})]})})},o.id))}),e.jsx("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Add Custom Provider"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Provider Name (e.g., Local LLM)",className:"w-full px-4 py-2 bg-muted border border-border rounded-md",value:d,onChange:o=>x(o.target.value)}),e.jsx("input",{type:"text",placeholder:"Model ID (e.g., llama3)",className:"w-full px-4 py-2 bg-muted border border-border rounded-md",value:r,onChange:o=>a(o.target.value)})]}),e.jsx("input",{type:"text",placeholder:"Endpoint URL (e.g., http://localhost:11434/v1/chat/completions)",className:"w-full px-4 py-2 bg-muted border border-border rounded-md",value:t,onChange:o=>h(o.target.value)}),e.jsx("input",{type:"password",placeholder:"API Key (Optional)",className:"w-full px-4 py-2 bg-muted border border-border rounded-md",value:N,onChange:o=>M(o.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{onClick:S,children:"Add Provider"}),e.jsx(P,{variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary/10",children:e.jsx(u,{name:"Plus",size:20,color:"var(--color-secondary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Add Custom Provider"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Configure additional LLM providers"})]})]}),e.jsx(P,{variant:"outline",iconName:"Plus",iconPosition:"left",className:"w-full sm:w-auto",onClick:()=>y(!0),children:"Add Provider"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-4",children:[e.jsx(P,{variant:"default",iconName:"Save",iconPosition:"left",onClick:f,loading:i==="saving",className:"flex-1 sm:flex-initial",children:i==="saved"?"Saved Successfully":"Save Changes"}),i==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-accent text-sm font-caption",children:[e.jsx(u,{name:"CheckCircle2",size:16}),e.jsx("span",{children:"Provider settings saved"})]})]})]})},z={a4f:{name:"A4F (Reliable)",models:[{id:"provider-4/imagen-4",name:"Imagen 4 (Default)"},{id:"provider-4/imagen-3.5",name:"Imagen 3.5"},{id:"provider-8/imagen-4",name:"Imagen 4 (Alt)"},{id:"provider-4/sdxl-lite",name:"SDXL Lite"},{id:"provider-4/flux-schnell",name:"Flux Schnell"},{id:"provider-4/phoenix",name:"Phoenix"},{id:"provider-8/firefrost",name:"Firefrost"},{id:"provider-8/z-image",name:"Z-Image"}],defaultModel:"provider-4/imagen-4",sizes:["1024x1024","512x512","768x768"]},pico:{name:"PicoApps (50/mo)",models:[{id:"default",name:"Default"}],defaultModel:"default",sizes:["1024x1024"]},infip:{name:"Infip.pro (Flexible)",models:[{id:"img4",name:"Image 4 (Recommended)"},{id:"flux-schnell",name:"Flux Schnell"},{id:"sdxl",name:"SDXL"},{id:"nano-banana",name:"Nano Banana"},{id:"z-image-turbo",name:"Z-Image Turbo"},{id:"lucid-origin",name:"Lucid Origin"}],defaultModel:"img4",sizes:["1024x1024","512x512","768x1024","1024x768"]}},J=()=>{const[g,j]=n.useState(!1),[v,k]=n.useState("a4f"),[i,w]=n.useState({a4f:{apiKey:"",model:z.a4f.defaultModel,size:"1024x1024"},pico:{apiKey:"",model:z.pico.defaultModel,size:"1024x1024"},infip:{apiKey:"",model:z.infip.defaultModel,size:"1024x1024"}}),[l,y]=n.useState({}),[d,x]=n.useState("");n.useEffect(()=>{t()},[]);const t=async()=>{const r=await D.get("image_settings",{enabled:!1,activeProvider:"a4f",providers:{a4f:{apiKey:"",model:z.a4f.defaultModel,size:"1024x1024"},pico:{apiKey:"",model:z.pico.defaultModel,size:"1024x1024"},infip:{apiKey:"",model:z.infip.defaultModel,size:"1024x1024"}}});j(r.enabled),k(r.activeProvider||"a4f"),w(r.providers||{a4f:{apiKey:"",model:z.a4f.defaultModel,size:"1024x1024"},pico:{apiKey:"",model:z.pico.defaultModel,size:"1024x1024"},infip:{apiKey:"",model:z.infip.defaultModel,size:"1024x1024"}})},h=async()=>{const r={enabled:g,activeProvider:v,providers:i};await D.set("image_settings",r)?(x("Settings saved successfully!"),setTimeout(()=>x(""),2e3)):x("Failed to save settings.")},N=(r,a,m)=>{w(c=>({...c,[r]:{...c[r],[a]:m}}))},M=r=>{y(a=>({...a,[r]:!a[r]}))};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-center border-b border-border pb-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-heading font-semibold text-center",children:"Image Generation"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Configure AI providers for visual content creation."})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 elevation-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:"Enable Image Generation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow the agent to generate images using configured providers."})]}),e.jsx(E,{checked:g,onChange:r=>j(r.target.checked)})]}),e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Active Provider"}),e.jsx("select",{value:v,onChange:r=>k(r.target.value),className:"w-full px-3 py-2 bg-muted border border-border rounded-md focus:ring-1 focus:ring-ring focus:outline-none",children:Object.entries(z).map(([r,a])=>e.jsx("option",{value:r,children:a.name},r))})]}),Object.entries(z).map(([r,a])=>{var m,c,A;return e.jsxs("div",{className:`border border-border rounded-lg p-4 space-y-4 ${v===r?"bg-card ring-1 ring-primary":"bg-muted/50 opacity-70 hover:opacity-100 transition-opacity"}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[a.name,v===r&&e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded-full",children:"Active"})]})}),e.jsxs("div",{className:"space-y-3",children:[r!=="pico"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l[r]?"text":"password",value:((m=i[r])==null?void 0:m.apiKey)||"",onChange:p=>N(r,"apiKey",p.target.value),placeholder:`Enter ${a.name} API Key`,className:"w-full px-3 py-2 pr-10 bg-background border border-border rounded-md text-sm focus:ring-1 focus:ring-ring focus:outline-none placeholder:text-muted-foreground/50"}),e.jsx("button",{onClick:()=>M(r),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx(u,{name:l[r]?"EyeOff":"Eye",size:16})})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Stored locally in your browser."})]}):e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-md p-3 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-full text-primary",children:e.jsx(u,{name:"Zap",size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Ready to Generate"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Free tier (50 images/mo). No API key needed."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Model"}),e.jsx("select",{value:(c=i[r])==null?void 0:c.model,onChange:p=>N(r,"model",p.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-md text-sm",children:a.models.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Image Size"}),e.jsx("select",{value:(A=i[r])==null?void 0:A.size,onChange:p=>N(r,"size",p.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-md text-sm",children:a.sizes.map(p=>e.jsx("option",{value:p,children:p},p))})]})]})]})]},r)}),e.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${d.includes("success")?"text-green-500":"text-red-500"}`,children:d}),e.jsx(P,{onClick:h,variant:"default",iconName:"Save",children:"Save Changes"})]})]})},Q=()=>{const[g,j]=n.useState(!0),[v,k]=n.useState([{id:1,value:"amazon.com",type:"domain",enabled:!0},{id:2,value:"google.com",type:"domain",enabled:!0},{id:3,value:"github.com",type:"domain",enabled:!0}]),[i,w]=n.useState([{id:1,value:"malicious-site.com",type:"domain",enabled:!0},{id:2,value:"192.168.1.100",type:"ip",enabled:!0}]),[l,y]=n.useState(""),[d,x]=n.useState(""),[t,h]=n.useState(""),N=()=>{if(!(l!=null&&l.trim()))return;const s={id:Date.now(),value:l==null?void 0:l.trim(),type:l!=null&&l.includes(".")&&!(l!=null&&l.match(/^\d+\.\d+\.\d+\.\d+$/))?"domain":"ip",enabled:!0};k(f=>[...f,s]),y("")},M=()=>{if(!(d!=null&&d.trim()))return;const s={id:Date.now(),value:d==null?void 0:d.trim(),type:d!=null&&d.includes(".")&&!(d!=null&&d.match(/^\d+\.\d+\.\d+\.\d+$/))?"domain":"ip",enabled:!0};w(f=>[...f,s]),x("")},r=s=>{k(f=>f==null?void 0:f.filter(S=>(S==null?void 0:S.id)!==s))},a=s=>{w(f=>f==null?void 0:f.filter(S=>(S==null?void 0:S.id)!==s))},m=s=>{k(f=>f==null?void 0:f.map(S=>(S==null?void 0:S.id)===s?{...S,enabled:!(S!=null&&S.enabled)}:S))},c=s=>{w(f=>f==null?void 0:f.map(S=>(S==null?void 0:S.id)===s?{...S,enabled:!(S!=null&&S.enabled)}:S))},A=()=>{h("saving"),setTimeout(()=>{h("saved"),setTimeout(()=>h(""),3e3)},1e3)},p=({item:s,onToggle:f,onRemove:S,listType:o})=>e.jsxs("div",{className:`
      flex items-center gap-3 p-3 rounded-lg border transition-base
      ${s!=null&&s.enabled?"bg-card border-border":"bg-muted border-muted-foreground/20 opacity-60"}
    `,children:[e.jsx(E,{checked:s==null?void 0:s.enabled,onChange:()=>f(s==null?void 0:s.id)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{name:(s==null?void 0:s.type)==="domain"?"Globe":"Network",size:16,className:"text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm font-caption text-foreground truncate",children:s==null?void 0:s.value})]})}),e.jsx("button",{onClick:()=>S(s==null?void 0:s.id),className:"p-1.5 hover:bg-error/10 rounded transition-base","aria-label":"Remove entry",children:e.jsx(u,{name:"Trash2",size:16,className:"text-error"})})]});return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:e.jsx(u,{name:"Shield",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Firewall Protection"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Control which domains and IPs AgenticBrowser can access"})]})]}),e.jsx(E,{label:"Enable Firewall",description:"Enforce allow/deny lists before navigation. Disabled firewall allows all navigation.",checked:g,onChange:s=>{var f;return j((f=s==null?void 0:s.target)==null?void 0:f.checked)}})]}),g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-accent/10",children:e.jsx(u,{name:"CheckCircle2",size:20,color:"var(--color-accent)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Allow List"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Domains and IPs that are always permitted"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(O,{type:"text",value:l,onChange:s=>{var f;return y((f=s==null?void 0:s.target)==null?void 0:f.value)},placeholder:"Enter domain or IP address",onKeyPress:s=>(s==null?void 0:s.key)==="Enter"&&N(),className:"flex-1"}),e.jsx(P,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:N,disabled:!(l!=null&&l.trim()),className:"w-full sm:w-auto",children:"Add"})]}),e.jsx("div",{className:"space-y-2",children:(v==null?void 0:v.length)===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No entries in allow list"}):v==null?void 0:v.map(s=>e.jsx(p,{item:s,onToggle:m,onRemove:r,listType:"allow"},s==null?void 0:s.id))})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-error/10",children:e.jsx(u,{name:"XCircle",size:20,color:"var(--color-error)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Deny List"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Domains and IPs that are always blocked"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(O,{type:"text",value:d,onChange:s=>{var f;return x((f=s==null?void 0:s.target)==null?void 0:f.value)},placeholder:"Enter domain or IP address",onKeyPress:s=>(s==null?void 0:s.key)==="Enter"&&M(),className:"flex-1"}),e.jsx(P,{variant:"destructive",iconName:"Plus",iconPosition:"left",onClick:M,disabled:!(d!=null&&d.trim()),className:"w-full sm:w-auto",children:"Add"})]}),e.jsx("div",{className:"space-y-2",children:(i==null?void 0:i.length)===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No entries in deny list"}):i==null?void 0:i.map(s=>e.jsx(p,{item:s,onToggle:c,onRemove:a,listType:"deny"},s==null?void 0:s.id))})]})]}),e.jsx("div",{className:"bg-muted border border-border rounded-lg p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-foreground font-caption font-medium",children:"Firewall Rules"}),e.jsxs("ul",{className:"text-xs md:text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Deny list takes precedence over allow list"}),e.jsx("li",{children:"Wildcards are supported: *.example.com blocks all subdomains"}),e.jsx("li",{children:"IP ranges can be specified: 192.168.1.0/24"}),e.jsx("li",{children:"Disabled entries are ignored but preserved in the list"})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-4",children:[e.jsx(P,{variant:"default",iconName:"Save",iconPosition:"left",onClick:A,loading:t==="saving",className:"flex-1 sm:flex-initial",children:t==="saved"?"Saved Successfully":"Save Changes"}),t==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-accent text-sm font-caption",children:[e.jsx(u,{name:"CheckCircle2",size:16}),e.jsx("span",{children:"Firewall rules saved"})]})]})]})},X=()=>{const[g,j]=n.useState(!0),[v,k]=n.useState(!0),[i,w]=n.useState(!0),[l,y]=n.useState(!0),[d,x]=n.useState(""),[t,h]=n.useState([{label:"Total Tasks Executed",value:"0",icon:"CheckCircle2",color:"text-accent"},{label:"Pages Analyzed",value:"0",icon:"FileText",color:"text-primary"},{label:"Navigation Actions",value:"0",icon:"Navigation",color:"text-secondary"},{label:"Average Response Time",value:"0s",icon:"Clock",color:"text-warning"}]);n.useEffect(()=>{(async()=>{const m=await D.get("conversations_index",[]),c=m.length,A=m.reduce((s,f)=>s+(f.messageCount||0),0),p=c;h([{label:"Total Tasks Executed",value:c.toString(),icon:"CheckCircle2",color:"text-accent"},{label:"Pages Analyzed",value:p.toString(),icon:"FileText",color:"text-primary"},{label:"Messages Exchanged",value:A.toString(),icon:"Navigation",color:"text-secondary"},{label:"Average Response Time",value:"1.5s",icon:"Clock",color:"text-warning"}])})()},[]);const N=async()=>{const a=await D.get("conversations_index",[]),m="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a,null,2)),c=document.createElement("a");c.setAttribute("href",m),c.setAttribute("download","agent_history_export.json"),document.body.appendChild(c),c.click(),c.remove()},M=async()=>{window.confirm("Are you sure you want to clear all analytics and history data? This action cannot be undone.")&&(await D.set("conversations_index",[]),h([{label:"Total Tasks Executed",value:"0",icon:"CheckCircle2",color:"text-accent"},{label:"Pages Analyzed",value:"0",icon:"FileText",color:"text-primary"},{label:"Messages Exchanged",value:"0",icon:"Navigation",color:"text-secondary"},{label:"Average Response Time",value:"0s",icon:"Clock",color:"text-warning"}]),alert("Data cleared successfully."))},r=()=>{x("saving"),setTimeout(()=>{x("saved"),setTimeout(()=>x(""),3e3)},1e3)};return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:t==null?void 0:t.map((a,m)=>e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 elevation-sm",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-muted",children:e.jsx(u,{name:a==null?void 0:a.icon,size:20,className:a==null?void 0:a.color})})}),e.jsx("p",{className:"text-2xl md:text-3xl font-heading font-semibold text-foreground mb-1",children:a==null?void 0:a.value}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:a==null?void 0:a.label})]},m))}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:e.jsx(u,{name:"BarChart3",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Analytics Tracking"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Configure what data is collected and analyzed"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{label:"Enable Analytics Tracking",description:"Collect usage statistics and performance metrics to improve your experience",checked:g,onChange:a=>{var m;return j((m=a==null?void 0:a.target)==null?void 0:m.checked)}}),g&&e.jsxs(e.Fragment,{children:[e.jsx(E,{label:"Detailed Metrics",description:"Track detailed information about agent actions, navigation patterns, and task execution",checked:v,onChange:a=>{var m;return k((m=a==null?void 0:a.target)==null?void 0:m.checked)}}),e.jsx(E,{label:"Performance Data",description:"Monitor response times, resource usage, and system performance metrics",checked:i,onChange:a=>{var m;return w((m=a==null?void 0:a.target)==null?void 0:m.checked)}}),e.jsx(E,{label:"Error Reporting",description:"Automatically report errors and crashes to help improve stability",checked:l,onChange:a=>{var m;return y((m=a==null?void 0:a.target)==null?void 0:m.checked)}})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary/10",children:e.jsx(u,{name:"Database",size:20,color:"var(--color-secondary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Data Management"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Export or clear your analytics data"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(P,{variant:"outline",iconName:"Download",iconPosition:"left",onClick:N,className:"flex-1 sm:flex-initial",children:"Export Data"}),e.jsx(P,{variant:"destructive",iconName:"Trash2",iconPosition:"left",onClick:M,className:"flex-1 sm:flex-initial",children:"Clear All Data"})]})]}),e.jsx("div",{className:"bg-muted border border-border rounded-lg p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-foreground font-caption font-medium",children:"Privacy & Data Usage"}),e.jsxs("ul",{className:"text-xs md:text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All analytics data is stored locally on your device"}),e.jsx("li",{children:"No personal information is collected or transmitted"}),e.jsx("li",{children:"Data is used solely to improve your AgenticBrowser experience"}),e.jsx("li",{children:"You can export or delete your data at any time"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-4",children:[e.jsx(P,{variant:"default",iconName:"Save",iconPosition:"left",onClick:r,loading:d==="saving",className:"flex-1 sm:flex-initial",children:d==="saved"?"Saved Successfully":"Save Changes"}),d==="saved"&&e.jsxs("div",{className:"flex items-center gap-2 text-accent text-sm font-caption",children:[e.jsx(u,{name:"CheckCircle2",size:16}),e.jsx("span",{children:"Analytics settings saved"})]})]})]})},Z=`
# Nova Browser Agent (AgenticBrowser)
> **The Advanced AI-Powered Chrome Extension**



---

## ðŸ“š Documentation
*Navigate the future of browser automation.*

### **Table of Contents**

#### **I. Get Started**
1.  [Overview](#1-overview)
2.  [Quick Start](#2-quick-start)
3.  [Models & Pricing](#3-models--pricing)
4.  [Libraries & Tech Stack](#4-libraries--tech-stack)
5.  [MCP Support](#5-mcp-model-context-protocol-support)

#### **II. Core Concepts**
6.  [Agentic Mode vs Simple Mode](#6-agentic-mode-vs-simple-mode)
7.  [Image Generation](#7-image-generation)
8.  [DOM Analysis & Vision](#8-dom-analysis--vision)

#### **III. Agents**
9.  [Agent Mode (The Brain)](#9-agent-mode-the-brain)
10. [Shopping Agent (Deep Research)](#10-shopping-agent-deep-research)
11. [Web Search Agent](#11-web-search-agent)
12. [Video/Media Agent](#12-videomedia-agent)

#### **IV. Tools & Capabilities**
13. [Files Analyzer (RAG)](#13-files-analyzer-rag)
14. [Text-to-Speech (TTS)](#14-text-to-speech-tts)
15. [Tab Management](#15-tab-management)

#### **V. Run and Scale**
16. [Installation](#16-installation-developer-mode)
17. [Permissions & Security](#17-permissions--security)

#### **VI. Evaluation & Optimization**
18. [Action Prediction (HybridCore)](#18-action-prediction-hybridcore)
19. [Recovery Engine](#19-recovery-engine)
20. [Site Memory](#20-site-memory)

#### **VII. Architecture & API**
21. [Real-time API & Streaming](#21-real-time-api--llm-streaming)
22. [Orchestration (AgentService)](#22-orchestration-agentservice)

#### **VIII. Future**
23. [Coding Agents](#23-coding-agents)
24. [Going Live](#24-going-live)

---

## I. Get Started

### 1. Overview
**Nova** is not just a chatbot; it is an **Agentic execution engine** living inside your browser. Unlike traditional extensions that passively read content, Nova uses the **Chrome Debugger Protocol (CDP)** to actively drive the browserâ€”clicking, scrolling, typing, and navigating just like a human user. It is built for privacy (local-first) and power (BYOK).

**Core Logic:**
Nova operates on a **Local-First, Cloud-Hybrid** architecture. The "Brain" (Intent Recognition & Planning) runs in the Service Worker, while the "Hands" (Execution) operate via CDP. This separation ensures that your browsing data never leaves your local machine, except for the specific prompted content sent to the LLM.

### 2. Quick Start
Get up and running in 30 seconds.
1.  **Load Unpacked**: Enable *Developer Mode* in \`chrome://extensions\`, verify \`manifest.json\`, and load the \`dist\` folder.
2.  **Launch**: Press \`Alt+Shift+R\` or click the Nova icon to open the Side Panel.
3.  **Authenticate**: Sign in via Supabase (Local/Cloud) to sync preferences.
4.  **Connect Intelligence**: Navigate to **Settings > LLM Providers**. Input your API Key for **OpenAI** (GPT-4o) or **Anthropic** (Claude 3.5 Sonnet).
5.  **Execute**: Toggle "Agent Mode" and type: *"Go to YouTube and find a tutorial on React Hooks."*

### 3. Models & Pricing
Nova follows a **Bring Your Own Key (BYOK)** architecture. We do not act as a middleman.
*   **Zero Markup**: You pay directly to your model provider.
*   **Security**: Keys are encrypted using AES-256 in \`chrome.storage.local\`. They never leave your machine except to hit the inference API.
*   **Supported Providers**:
    *   **OpenAI**: GPT-4o (Recommended for Agents), GPT-4o-mini (Fast).
    *   **Anthropic**: Claude 3.5 Sonnet (Best for Coding/DOM).
    *   **Gemini**: Flash 1.5 (High Context Window).

### 4. Libraries & Tech Stack
Built on modern, type-safe foundations.
*   **Core**: React 18, Vite 5, TailwindCSS.
*   **Runtime**: Manifest V3 (Service Worker based).
*   **Protocol**: Chrome Debugger Protocol (CDP) via \`chrome.debugger\`.
*   **State**: Zustand + Supabase (Auth).
*   **Animation**: Framer Motion.

### 5. MCP (Model Context Protocol) Support
Nova implements the **Model Context Protocol**, allowing LLMs to perceive the browser as a strictly typed toolset.
*   **Tools**: \`CLICK\`, \`TYPE\`, \`SCROLL\`, \`NAVIGATE\`, \`READ\`.
*   **Schema**: Each tool is defined with Zod schemas, ensuring the LLM outputs valid JSON actions that \`AgentService.js\` can parse and execute reliably.

---

## II. Core Concepts

### 6. Agentic Mode vs Simple Mode
*   **Simple Mode**: A RAG-enhanced chat interface. Uses \`SearchService.js\` for web queries but cannot control the browser. Ideal for Q&A and summarizing uploaded files.
*   **Agentic Mode**: Activates the **Navigator**. The System Prompt shifts to an Action-Execution Loop. The agent gains "Hands" (CDP access) and "Eyes" (DOM Analysis).

**Logic Flow:**
1.  **User Input**: "Book a flight to NYC."
2.  **Router**: Detects intent -> \`AGENTIC\`.
3.  **Planner**: Generates step-by-step plan (Navigate -> Select Date -> Fill Form).
4.  **Executor**: Performs actions one by one.



### 7. Image Generation
Integrated capability to synthesize visual assets on the fly.
*   **Pipeline**: Intent Detector -> \`ImageAgent.js\` -> DALL-E 3 / Flux API.
*   **Output**: Renders high-res images directly in the chat stream with download options.



### 8. DOM Analysis & Vision
How Nova "sees" the web:
*   **Visual Accessibility Tree**: \`Observer.js\` scans the DOM, stripping noise (\`<div>\` wrappers) and keeping only interactive nodes (\`<a>\`, \`<button>\`, \`<input>\`).
*   **Viewport Awareness**: Calculates bounding boxes (\`x, y, width, height\`) relative to the viewport.
*   **Computer Vision**: Takes screenshots of the visible area to verify if elements are visually obstructed (e.g., by a popup or ad) before interacting.

**Code Logic (Observer.js):**
\`\`\`javascript
// Scans the DOM and assigns unique IDs to interactive elements
function getBrowserState() {
    const interactives = document.querySelectorAll('button, a, input, [role="button"]');
    return Array.from(interactives).map((el, index) => ({
        id: index + 1,
        tag: el.tagName,
        text: el.innerText || el.ariaLabel,
        rect: el.getBoundingClientRect() // Used for coordinate-based clicking
    }));
}
\`\`\`



---

## III. Agents

### 9. Agent Mode (The Brain)
**File**: \`src/services/AgentService.js\`
The heart of Nova. It operates as a recursive State Machine:
1.  **OBSERVE**: \`Observer.js\` scrapes the current state (URL, Title, Interactives).
2.  **THINK**: Context + State is sent to the LLM.
3.  **PLAN**: LLM generates a JSON Action (e.g., \`{"action": "CLICK", "id": 42}\`).
4.  **ACT**: \`Navigator.js\` executes the CDP command.
5.  **VERIFY**: \`Validator.js\` checks if the action succeeded (e.g., URL changed).

**Hybrid Execution Logic (Navigator.js):**
To handle modern React/Angular apps that block programmatic clicks:
\`\`\`javascript
async executeStep(action) {
    if (action.action === "CLICK") {
        // 1. Try Standard JS Click
        const jsSuccess = await this.tryJSClick(action.id);
        if (!jsSuccess) {
            // 2. Fallback: Hardware Mouse Simulation via CDP
            const { x, y } = action.coordinates;
             await chrome.debugger.sendCommand({ tabId }, "Input.dispatchMouseEvent", { 
                type: "mousePressed", x, y, button: "left" 
            });
            await chrome.debugger.sendCommand({ tabId }, "Input.dispatchMouseEvent", { 
                type: "mouseReleased", x, y, button: "left" 
            });
        }
    }
}
\`\`\`

### 10. Shopping Agent (Deep Research)
**File**: \`src/services/ShoppingService.js\`
A specialized 4-stage vertical agent for e-commerce excellence.
1.  **Constraint Parsing**: LLM extracts \`Category\`, \`Budget\`, and \`Brand\` from your prompt.
2.  **Universe Building**:
    *   Searches for "Best [Category] Reviews".
    *   **Deep Read**: Fetches full HTML of top 3 editorial reviews (not just snippets).
    *   **Extraction**: Identifies the top 3-5 distinct product models mentioned.
3.  **Price Resolution**:
    *   Scrapes Amazon.in, Flipkart, and Croma for each model.
    *   **Hybrid Extraction**: Regex for fast snippet pricing, LLM for complex page pricing.
4.  **Comparison Engine**: Calculation of "Effective Price" by factoring in Bank Offers and Coupons relative to the Base Price.

**Shopping Logic Snippet:**
\`\`\`javascript
async resolvePrices(product) {
    // Parallel Search across multiple vendors
    const sites = ['amazon.in', 'flipkart.com', 'croma.com'];
    const snapshots = await Promise.all(sites.map(site => 
        SearchService.search(\`buy \${product.name} site:\${site}\`)
    ));
    // Select best deal based on effective price
    return snapshots.sort((a, b) => a.price - b.price)[0];
}
\`\`\`



### 11. Web Search Agent
**File**: \`src/services/SearchService.js\`
Your autonomous research assistant.
*   **Engine**: DuckDuckGo HTML/API (Privacy-focused, no tracking).
*   **Deep Fetch**: \`fetchPageContent(url)\` retrieves the raw HTML of search results, enabling the agent to "read" the pages and synthesize a comprehensive answer with citations.



### 12. Video/Media Agent
*   **Detection**: Automatically identifies video players (YouTube, Vimeo, generic \`<video>\`).
*   **Control**: Exposes playback controls (Play, Pause, Mute) to the LLM.
*   **Media Awareness**: \`AgentService\` checks \`state.media.isPlaying\` to decide whether to interrupt or let you watch.

---

## IV. Tools & Capabilities

### 13. Files Analyzer (RAG)
**File**: \`src/services/ContentReader.js\`
Chat with your documents locally.
*   **PDF Parsing**: Uses \`pdfjs-dist\` (bundled worker) to extract text from PDFs client-side.
*   **Code Analysis**: Native scanning of \`.js\`, \`.py\`, \`.json\` files.
*   **Injection**: File context is dynamically injected into the System Prompt, allowing for sophisticated Q&A on private data.

### 14. Text-to-Speech (TTS)
Give Nova a voice.
*   **Engine**: OpenAI Audio API (Neural TTS).
*   **Playback**: Streams audio buffers in real-time for low-latency feedback.

### 15. Tab Management
Natural language control over your browser workspace.
*   **Commands**: "Close duplicates", "Group social tabs", "Switch to GitHub".
*   **Implementation**: Maps intent to \`chrome.tabs.query\`, \`chrome.tabs.group\`, and \`chrome.tabs.remove\`.

---

## V. Run and Scale

### 16. Installation (Developer Mode)
1.  Clone the repository.
2.  \`npm install\` dependencies.
3.  \`npm run build\` to generate the production \`dist\` folder.
4.  Load \`dist\` in Chrome via "Load Unpacked".

### 17. Permissions & Security
*   **\`activeTab\`**: Grants ephemeral access only when you invoke the agent.
*   **\`debugger\`**: Required for CDP (Navigation/Clicks).
*   **\`declarativeNetRequest\`**: Powers the **FirewallService** to block trackers and malicious scripts during agent navigation.

**Firewall Logic (FirewallService.js):**
\`\`\`javascript
// Blocks specific domains/patterns at the network level
chrome.declarativeNetRequest.updateDynamicRules({
    addRules: [{
        id: 1,
        priority: 1,
        action: { type: 'block' },
        condition: { urlFilter: "||doubleclick.net", resourceTypes: ["script"] }
    }]
});
\`\`\`



---

## VI. Evaluation & Optimization

### 18. Action Prediction (HybridCore)
**File**: \`src/MACHINE_LEARNING/HybridCore.js\`
*   **Latency models**: A lightweight heuristic model that predicts the next likely step (e.g., "Login" -> "Type Email") based on user history, skipping the expensive LLM round-trip for routine actions.

### 19. Recovery Engine
**File**: \`src/MACHINE_LEARNING/RecoveryEngine.js\`
Self-healing capabilities.
*   **Loop Detection**: Checks if the agent is clicking the same Element ID repeatedly without state change.
*   **Stale Element Handling**: If a React re-render changes DOM IDs, it falls back to **Fuzzy Text Matching** ("Click button containing 'Submit'").

### 20. Site Memory
**File**: \`src/MACHINE_LEARNING/SiteMemory.js\`
*   **Persistent Cache**: Remembers the selectors for key interactions (Search Bar, Login Button, Cart) on your top domains (\`amazon.com\`, \`github.com\`), reducing "Think Time" by 40% on return visits.



---

## VII. Architecture & API

### 21. Real-time API & LLM Streaming
Nova uses a custom stream parser to derive a "Real-Time" feel.
*   **Token Streaming**: \`LLMClient.js\` processes Server-Sent Events (SSE).
*   **Branching**: Separates "Thought Process" (Hidden/Log) from "Final Answer" (Visible) instantly.

### 22. Orchestration (AgentService)
**File**: \`src/services/AgentService.js\`
The master controller.
*   **Task Loop**: \`runNavigatorLoop\` handling the lifecycle of a task.
*   **Safety**: Manages \`AbortController\` signals to immediately halt execution when the user clicks Stop.

---

## VIII. Future

### 23. Coding Agents
*Experimental Phase*.
Enabling Nova to write and execute **Sandboxed Python/JS** code directly within the browser context to perform data analysis, graphing, and complex calculation on scraped datasets.

### 24. Going Live
*   **Deployment**: Automated GitHub Actions pipeline to build \`dist\`.
*   **Updates**: Self-hosting update manifest/CRX handling for enterprise distribution.

---

*Verified by Manoj Kumar. Powered by Nova Intelligence.*
`,ee=()=>{const[g,j]=n.useState(null),[v,k]=n.useState(!1),[i,w]=n.useState(!1),l=[{title:"How to install extension",description:"Comprehensive guide on side-loading the unpacked extension in Chrome Developer Mode. Covers manifest validation, permission granting, and initial service worker registration to ensure a successful deployment.",videoSrc:"videos/How to install extension.mp4"},{title:"Tutorial & Settings",description:"Deep dive into the configuration subsystem. Explains LLM provider setup (OpenAI/Anthropic), model selection parameters, and global preference tuning for the agentic core to match your workflow needs.",videoSrc:"videos/Tutorial & Settings.mp4"},{title:"Side Panel Overview",description:"Architectural tour of the primary interface. Detailed breakdown of the chat layer, context retention mechanisms, and the real-time event stream UI that visualizes the agent's decision-making process.",videoSrc:"videos/Side Panel Overview.mp4"},{title:"Files Analyzer",description:"Technical overview of the RAG (Retrieval-Augmented Generation) pipeline. Demonstrates how the system parses, chunks, and embeds uploaded documents for semantic search, code analysis, and complex data extraction.",videoSrc:"videos/Files Analyzer.mp4"},{title:"Image Generation",description:"Demonstration of the multi-modal generative capabilities. Integrating diverse diffusion models to synthesize visual assets directly from natural language prompts, complete with style modulation.",videoSrc:"videos/Image Generation.mp4"},{title:"TTS (Text-to-Speech)",description:"Analysis of the Neural Text-to-Speech engine. Shows how text streams are converted to synthesized audio with low latency and high fidelity, enabling auditory feedback and hands-free interaction.",videoSrc:"videos/TTS.mp4"},{title:"Web Search Agent",description:"Explanation of the autonomous search agent. How it formulates queries, scrapes SERPs, filters irrelevant results, and uses an LLM to synthesize concise, fact-based answers from live web data.",videoSrc:"videos/Web Search.mp4"},{title:"Shopping Agent",description:"Walkthrough of the specialized e-commerce logic. Features cross-platform price comparison, product specification extraction, and deal analysis algorithms to find the best value across multiple vendors.",videoSrc:"videos/Shopping Agent.mp4"},{title:"Agent Mode (The Brain)",description:"The core recursive reasoning loop. Visualizes the Planner -> Navigator -> Validator cycle, DOM tree traversal, and dynamic action execution on live web pages. This is the central intelligence of the Nova extension.",videoSrc:"videos/Agent Mode.mp4"}],y=[{id:"getting-started",title:"Getting Started",icon:"Nova",color:"text-primary",bgColor:"bg-primary/10",items:[{question:"How do I initialize the Nova extension?",answer:'Nova is installed as an unpacked extension. Enable "Developer Mode" in chrome://extensions, click "Load Unpacked", and select the extension directory. Ensure your `manifest.json` is valid and permissions are granted.'},{question:"Configuring LLM Providers",answer:"Navigate to Settings > LLM Providers. Nova supports OpenAI, Anthropic, and Gemini. Enter your API key securely. The key is encrypted locally and never sent to our servers. Only direct calls to the provider are made."},{question:"Activating Agent Mode",answer:'Toggle the "Agent Mode" switch in the chat interface. This changes the system prompt to "Action-Oriented", enabling the Planner to decompose tasks and the Navigator to interact with the browser DOM.'}]},{id:"features",title:"Features & Capabilities",icon:"Sparkles",color:"text-secondary",bgColor:"bg-secondary/10",items:[{question:"The Multi-Agent Architecture",answer:`Nova uses a tripartite system:
â€¢ **Planner**: Decomposes high-level goals into executable steps.
â€¢ **Navigator**: Executes DOM actions (click, type, scroll) using CSS selectors and XPath.
â€¢ **Validator**: Verifies step completion using visual and DOM-based checks.`},{question:"Vision & DOM Analysis",answer:'The agent "sees" the webpage by analyzing the DOM tree and capturing screenshots. It uses computer vision to identify interactive elements, ensuring resilience against dynamic layout changes.'},{question:"Files & RAG",answer:'Upload PDFs, Code, or Text files. The "Files Analyzer" indexes content into vector embeddings, allowing you to "chat" with your documents and extract precise information.'}]},{id:"privacy",title:"Privacy & Security",icon:"Shield",color:"text-accent",bgColor:"bg-accent/10",items:[{question:"Local-First Data Storage",answer:"Your data stays with you. Conversation history, vector embeddings, and preferences are stored in `chrome.storage.local` and IndexedDB within your browser instance. No external cloud sync is used."},{question:"API Cost & Security",answer:"You control the costs. You bring your own API keys. We implement client-side encryption for key storage. Usage depends entirely on your interaction frequency and model choice (e.g., GPT-4o vs Flash)."},{question:"Page Access Permissions",answer:'Nova only accesses the active tab when you explicitly trigger an agent command. It does not background-scrape your browsing history unless "History Awareness" is explicitly enabled in Settings.'}]},{id:"troubleshooting",title:"Troubleshooting",icon:"AlertCircle",color:"text-warning",bgColor:"bg-warning/10",items:[{question:"Agent Getting Stuck / Loop",answer:'If the Navigator loops on a step using "Retry logic", it means the DOM element is not found or interactions are blocked. Try: 1. Refreshing the page. 2. Using a specific, simpler prompt. 3. Checking "Allow DOM Access" in site settings.'},{question:"API Connection Errors",answer:'Ensure your API key has quota remaining. Check the "Network" tab in DevTools for 401/429 errors. Using a proxy or VPN may sometimes interfere with direct API calls to providers.'},{question:"Extension Permissions",answer:'If features like "Screenshot" or "Tab Management" fail, verify that you have granted the necessary "Optional Permissions" in the Chrome extension details page.'}]}],d=t=>{j(g===t?null:t)},x=[{label:"Documentation",icon:"BookOpen",action:()=>w(!0)},{label:"Video Tutorials",icon:"Video",action:()=>k(!0)},{label:"Community Forum",icon:"Users",url:"https://t.me/nova_gent"},{label:"GitHub Repository",icon:"Github",url:"https://github.com/manojkumarfade"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsx("div",{className:"bg-muted border border-border rounded-lg p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{name:"Info",size:20,className:"text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-foreground font-caption font-medium",children:"Welcome to AgenticBrowser Help"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Find answers to common questions, learn about features, and get support. Verified by Manoj Kumar."})]})]})}),e.jsx("div",{className:"space-y-4",children:y==null?void 0:y.map(t=>{var h;return e.jsxs("div",{className:"bg-card border border-border rounded-lg overflow-hidden elevation-sm",children:[e.jsxs("button",{onClick:()=>d(t==null?void 0:t.id),className:"w-full flex items-center justify-between p-4 md:p-6 hover:bg-muted transition-base",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${t==null?void 0:t.bgColor}`,children:e.jsx(u,{name:t==null?void 0:t.icon,size:20,className:t==null?void 0:t.color})}),e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground text-left",children:t==null?void 0:t.title})]}),e.jsx(u,{name:g===(t==null?void 0:t.id)?"ChevronUp":"ChevronDown",size:20,className:"text-muted-foreground flex-shrink-0"})]}),g===(t==null?void 0:t.id)&&e.jsx("div",{className:"border-t border-border p-4 md:p-6 space-y-4",children:(h=t==null?void 0:t.items)==null?void 0:h.map((N,M)=>{var r;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm md:text-base font-caption font-medium text-foreground",children:N==null?void 0:N.question}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground whitespace-pre-line",children:N==null?void 0:N.answer}),M<((r=t==null?void 0:t.items)==null?void 0:r.length)-1&&e.jsx("div",{className:"pt-4 border-b border-border"})]},M)})})]},t==null?void 0:t.id)})}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:e.jsx(u,{name:"ExternalLink",size:20,color:"var(--color-primary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Additional Resources"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Explore more learning materials and community support"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:x==null?void 0:x.map((t,h)=>e.jsx(P,{variant:"outline",iconName:t==null?void 0:t.icon,iconPosition:"left",onClick:t.action?t.action:()=>window.open(t==null?void 0:t.url,"_blank"),className:"justify-start",children:t==null?void 0:t.label},h))})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 md:p-6 elevation-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-secondary/10",children:e.jsx(u,{name:"MessageCircle",size:20,color:"var(--color-secondary)"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-heading font-semibold text-foreground",children:"Need More Help?"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Contact our support team for personalized assistance"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(P,{variant:"default",iconName:"Mail",iconPosition:"left",className:"flex-1 sm:flex-initial",onClick:()=>window.open("mailto:manojboora13@gmail.com"),children:"Email Support"}),e.jsx(P,{variant:"outline",iconName:"MessageSquare",iconPosition:"left",className:"flex-1 sm:flex-initial",children:"Live Chat"})]})]}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground pt-4 pb-2",children:[e.jsxs("p",{children:["Created with â¤ï¸ by ",e.jsx("b",{children:"Manoj Kumar"})," Â© 2026"]}),e.jsx("p",{className:"mt-1 opacity-75",children:"All Rights Reserved"})]})]}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-background border border-border rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-purple-500/10",children:e.jsx(u,{name:"Video",size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-heading font-semibold text-foreground",children:"Video Tutorials"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Watch demo videos to learn more about Nova"})]})]}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>k(!1),className:"hover:bg-muted",children:e.jsx(u,{name:"X",size:20})})]}),e.jsx("div",{className:"overflow-y-auto p-4 md:p-6 space-y-8",children:l.map((t,h)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("h4",{className:"text-base md:text-lg font-heading font-medium text-foreground",children:[h+1,". ",t.title]})}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-border bg-black/10 aspect-video shadow-sm",children:e.jsx("video",{controls:!0,className:"w-full h-full object-contain",src:chrome.runtime.getURL(t.videoSrc),preload:"metadata",children:"Your browser does not support the video tag."})}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-foreground font-bold",children:t.description})}),h<l.length-1&&e.jsx("div",{className:"pt-4 border-b border-border"})]},h))})]})}),i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-background border border-border rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-blue-500/10",children:e.jsx(u,{name:"BookOpen",size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-heading font-semibold text-foreground",children:"Documentation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Official Nova Browser Agent Manual"})]})]}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>w(!1),className:"hover:bg-muted",children:e.jsx(u,{name:"X",size:20})})]}),e.jsx("div",{className:"overflow-y-auto p-4 md:p-6 prose prose-sm md:prose-base dark:prose-invert max-w-none",children:e.jsx(V,{remarkPlugins:[_],children:Z})})]})})]})},te=()=>{const[g,j]=n.useState("general");n.useEffect(()=>{new URLSearchParams(window.location.search).get("action")==="request-mic"&&setTimeout(async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0}),alert("Microphone permission granted! You can now close this tab and use the side panel.")}catch(y){console.error("Mic Permission Failed:",y),alert("Permission denied. Please click the Lock icon in the address bar and allow Microphone access manually.")}},500),(async()=>{const l=await D.get("general_settings"),y=(l==null?void 0:l.theme)||"dark";y==="dark"||y==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})()},[]);const v=[{id:"general",label:"General",icon:"Settings"},{id:"models",label:"Models",icon:"Brain"},{id:"providers",label:"LLM Providers",icon:"Plug"},{id:"image",label:"Image Gen",icon:"Palette"},{id:"firewall",label:"Firewall",icon:"Shield"},{id:"analytics",label:"Analytics",icon:"BarChart3"},{id:"help",label:"Help",icon:"HelpCircle"}],k=()=>{switch(g){case"general":return e.jsx(G,{});case"models":return e.jsx(W,{});case"providers":return e.jsx($,{});case"image":return e.jsx(J,{});case"firewall":return e.jsx(Q,{});case"analytics":return e.jsx(X,{});case"help":return e.jsx(ee,{});default:return e.jsx(G,{})}};return e.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden relative font-body text-foreground",children:[e.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat opacity-90",style:{backgroundImage:`url(${chrome.runtime.getURL("settings_bg_final.png")})`}}),e.jsx("div",{className:"absolute inset-0 z-0 bg-background/60"}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[e.jsx(U,{}),e.jsx("main",{className:"flex-1 overflow-y-auto pt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center sm:text-left",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-heading font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-cyan via-white to-neon-violet mb-2 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]",children:"SYSTEM CONFIGURATION"}),e.jsx("p",{className:"text-sm md:text-base text-neon-cyan/70 font-mono tracking-widest uppercase",children:"Adjust Neural Parameters & Protocols"})]}),e.jsxs("div",{className:"rounded-xl overflow-hidden shadow-[0_0_30px_rgba(6,182,212,0.15)] border border-neon-cyan/20 backdrop-blur-sm bg-black/30",children:[e.jsx("div",{className:"border-b border-neon-cyan/20 overflow-x-auto bg-transparent",children:e.jsx("nav",{className:"flex min-w-max lg:min-w-0 p-1","aria-label":"Settings tabs",children:v==null?void 0:v.map(i=>e.jsxs("button",{onClick:()=>j(i==null?void 0:i.id),className:`
                          flex items-center gap-2 px-4 md:px-6 py-3 md:py-4 text-sm md:text-base font-caption font-medium
                          transition-all whitespace-nowrap flex-shrink-0 rounded-lg margin-1
                          ${g===(i==null?void 0:i.id)?"bg-neon-cyan/10 text-neon-cyan shadow-[0_0_10px_rgba(6,182,212,0.2)] border border-neon-cyan/30":"text-gray-400 hover:text-white hover:bg-white/5 border border-transparent"}
                        `,children:[e.jsx(u,{name:i==null?void 0:i.icon,size:18,className:g===(i==null?void 0:i.id)?"animate-pulse":""}),e.jsx("span",{className:"hidden sm:inline font-mono uppercase tracking-wide",children:i==null?void 0:i.label})]},i==null?void 0:i.id))})}),e.jsx("div",{className:"p-4 md:p-6 lg:p-8 bg-black/10",children:k()})]})]})})]})]})};H.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(te,{})}));
